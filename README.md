# Console Ninja

Console Ninja is a VS Code extension that displays `console.log` output and errors from your running browser or node applications directly in your editor. It's like your browser dev tools console tab, or terminal output from your node app, but placed in context of your code and designed to stay connected to your code.

![preview](https://console-ninja.com/images/main.gif)

TODO updated image

## Current status

Console Ninja is available for everyone to use for free. It's still very early days of the product, so we would appreciate if you [let us know](https://github.com/wallabyjs/console-ninja/issues) about any issues/bugs that you may find and feature requests that you may have.

While we will probably commercialise Console Ninja at some point, we don't have any immediate plans to do so. Regardless, we plan to always have a free version available and any commercial offering would probably provide more advanced features.

## Supported technologies

Console Ninja currently supports the following tools:
- [Vite](https://vitejs.dev/), including 
  - web applications that were generated by Vite CLI such the ones using React, Vue, Preact, Lit, Svelte, Vanilla, TypeScript or JavaScript;
  - web applications configured to use Vite; 
  - web applications powered by app frameworks that are [using Vite](https://patak.dev/vite/ecosystem.html), such as [Nuxt](https://nuxtjs.org/) or [SvelteKit](https://kit.svelte.dev/).
- [Webpack](https://webpack.js.org/), including
  - [Create React App](https://create-react-app.dev/) generated applications;
  - [Angular CLI](https://angular.io/cli) and [Angular Nx](https://nx.dev/packages/angular) generated applications;
  - any web applications configured to use Webpack node module. 
- [Next.js](https://nextjs.org/), including first class support for client and server side logs.
- [Jest](https://jestjs.io/) test runner (only `console.log` output, no errors).
- [Cypress.io](https://www.cypress.io/) end-to-end test runner.
- [http-server](https://www.npmjs.com/package/http-server) and [serve](https://www.npmjs.com/package/serve) static HTTP servers.
- [Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer) VS Code extension.
- [Live Preview](https://marketplace.visualstudio.com/items?itemName=ms-vscode.live-server) VS Code extension.

We have designed Console Ninja in such a way that adding support for new tools is as fast and easy as possible, so please [let us know](https://github.com/wallabyjs/console-ninja/issues) what technologies you want to use Console Ninja with.

## Get started

Console Ninja is designed to seamlessly fit into typical dev workflows. After you have installed the extension in VS Code and opened your project, you may follow the steps you usually take:
- run `npm/pnpm/yarn` script or CLI command that starts/opens your app in dev/watch/hot-reload mode;
- start making code changes, such as adding `console.log` to your code **\***;
- if required **\*\***, perform the actions within your app that trigger the modified code, ie. click a button if you have added `console.log` to the button click handler;

**\*** *Most of the modern tools run in watch mode with hot reload. If your tool doesn't have such mode, then, the same way as without Console Ninja, you need to refresh your app page to make it run your modified code.*.

**\*\*** *Sometimes your modified code may get triggered immediately upon the (hot) reload of the app, for example when the code is located in the root of a component that is loaded when the app (re)starts. If the modified code is not triggered by the app (re)start, then, the same way as without Console Ninja, you need to perform some app specific actions to trigger the code execution.*

At this point, you should be able to see the logs (and errors, if any) in your editor, next to the relevant line of code. Hovering over the line displays more detailed view of a log entry/error. Using the `Show Output` command displays the aggregated view to explore logged values and navigate between logs and code.

TODO image

### Log viewer

TODO

## Troubleshooting

If Console Ninja is not working for you as expected, the first thing to check is the extension status. You may see the status info by hovering over the extension icon in VS Code status bar.

TODO image

The status popup information explains the current state of the tool and provides some tips on what to do next.

## How does it work

Console Ninja integrates with locally installed tools that are building/preparing your code, and instruments it before it gets to the runtime (browser or node process that runs the code).

To integrate with supported tools seamlessly, Console Ninja patches your locally installed node modules. When you stop Console Ninja in the editor with the `Pause` command, all made patches are undone.

Console Ninja also does its best to detect if you are running your tool in production mode (by checking CLI flags and process environment variables). In the case when production mode is detected, the tool will not modify your built app code even if Console Ninja is running. However, in the (unlikely) case if you are running production builds on your local dev computer and are deploying or sharing those local builds outside of your machine, we recommend to run Console Ninja `Pause` command in your editor prior to running the build to guarantee that no instrumented code ends up in the build. 

Console Ninja instrumentation is limited to send runtime values for `console.log` and errors to your locally running editor only (`localhost` hosted websocket server), the runtime data from your app is never sent outside of your local machine. If the code of your app instrumented by Console Ninja is used outside of your local machine for some reason: 
- in browser, it will simply do nothing if the app host is not `localhost`.
- in node, it will fail to connect to `localhost` and should not stop your app from working.

## Difference between Console Ninja and other tools

### Quokka.js

[Quokka.js](https://quokkajs.com/) is another awesome tool from [our team](https://wallabyjs.com/). Similarly to Console Ninja, it allows you to see various execution results in your editor.

The fundamental difference is that Quokka runs new scratch file or existing code file as a program, and that allows you to play with some code in an **isolated playground**. Console Ninja on the other hand runs within your application (started by your dev server, or test runner), and that allows you to debug any **end to end scenarios within your running app**.

### Error Lens extension
[Error Lens](https://marketplace.visualstudio.com/items?itemName=usernamehw.errorlens) VS Code extension provides inline output for VS Code `Problems` output window, typically **static code analysis errors** from your code linter or language service, such as a linter rule violation or TypeScript types-related error.

Console Ninja on the other hand runs within your application and displays **runtime logs and errors**.
